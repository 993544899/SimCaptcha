<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title></title>
	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/SimCaptcha.css" rel="stylesheet" />
</head>

<body>
	<div id="app" style="margin:200px auto;width: 400px;">
		<div class=".form">
			<div class="form-group">
				<label>用户名</label>
				<input id="js-input-userName" type="text" class="form-control">
			</div>
			<div class="form-group">
				<label>密码</label>
				<input id="js-input-password" type="password" class="form-control">
			</div>
			<div>
				<input id="js-ticket" type="hidden">
				<input id="js-userId" type="hidden">
			</div>
			<button id="js-btn-verify" class="btn btn-gray btn-block">点击验证</button>
			<button id="js-btn-login" class="btn btn-info btn-block" style="margin-top:14px;">登陆</button>
		</div>

	</div>
	<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
	<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
	<script src="js/SimCaptcha.js"></script>
	<script>
		$(function () {

			// 点击验证
			window.simCaptcha = new SimCaptcha(
				document.getElementById("js-btn-verify"),
				'132132',
				function (res) {
					if (res.code === 0) {
						// 验证码服务端-验证通过
						console.log("第一次验证通过");
						// 第一次验证通过
						$("#js-btn-verify").text("验证通过");
						$("#js-btn-verify")[0].className = "btn btn-success btn-block";
						// 准备 业务后台 第二次验证
						$("#js-ticket").val(res.ticket);
						$("#js-userId").val(res.userId);
						console.log("第一次验证 结束");
					}
				}
			)
			window.simCaptcha.setUrl("https://localhost:44366/api/vCode/VCodeImg", "https://localhost:44366/api/vCode/VCodeCheck");

		});
	</script>
</body>

</html>